<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="shortcut icon" type="image/x-icon" href="logo.webp">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4794113333225658"
     crossorigin="anonymous"></script>
    <title>Sarveprajna</title>
    <style>
        /* Global Styles */
        body {
            background-image: url('background.webp');
            background-size: cover;
            background-position: center;
            background-repeat: repeat;
            margin: 0;
            height: 100vh;
            width: 100vw;
            background-color: rgba(245, 245, 245, 0.8);
            background-blend-mode: lighten;
            animation: fadeIn 1.2s forwards;
            transition: opacity 0.6s;

        }

        .header {
            display: flex;
            align-items: center;
            padding: 20px;
        }

        .logo-container {
            margin-right: 15px;
        }

        .logo {
            width: 115px;
            height: 115px;
            border-radius: 50%;
            object-fit: cover;
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.3);
        }

        .website-name h1 {
            font-size: 4.5rem;
            color: #0077b6;
            margin: 0;
            font-weight: bold;
            letter-spacing: 2px;
        }

        .info-box {
            margin: 20px auto;
            width: 80%;
            padding: 35px 20px;
            background-color: rgba(139, 190, 211, 0.95);
            border-radius: 20px;
            box-shadow: 0px 6px 16px rgba(0, 0, 0, 0.15);
            line-height: 1.6;
        }

        .info-box p {
            font-size: 1.2rem;
            color: #000;
        }

        .box {
            margin: 20px auto;
            width: 80%;
            padding: 20px 20px;
            background-color: #0077b6;
            border-radius: 20px;
            box-shadow: 0px 6px 16px rgba(0, 0, 0, 0.15);
            line-height: 1.6;
            text-align: center;
        }

        .box p1 {
            font-size: 1.2rem;
            color: #fff;
        }

        .arrow {
            color: #fff;
            font-size: 1rem;
            animation: moveArrow 1s infinite;
        }

        @keyframes moveArrow {
            0% {
                transform: translateX(0);
            }

            50% {
                transform: translateX(10px);
            }

            100% {
                transform: translateX(0);
            }
        }

        .link {
            color: #fff;
            text-decoration: none;
            font-weight: bold;
        }

        /* Responsive Styles */
        @media (max-width: 1024px) {
            .logo {
                width: 90px;
                height: 90px;
            }

            .website-name h1 {
                font-size: 3.5rem;
            }

            .info-box,
            .box {
                width: 90%;
                padding: 20px;
            }

            .info-box p,
            .box p1 {
                font-size: 1rem;
            }
        }

        @media (max-width: 768px) {
            .logo {
                width: 70px;
                height: 70px;
            }

            .website-name h1 {
                font-size: 2.5rem;
            }

            .info-box,
            .box {
                width: 95%;
                padding: 15px;
            }

            .info-box p,
            .box p1 {
                font-size: 0.9rem;
            }
        }

        @media (max-width: 480px) {
            .header {
                flex-direction: column;
                align-items: center;
                text-align: center;
            }

            .logo {
                width: 60px;
                height: 60px;
            }

            .website-name h1 {
                font-size: 2rem;
            }

            .info-box,
            .box {
                width: 95%;
                padding: 10px;
            }

            .info-box p,
            .box p1 {
                font-size: 0.8rem;
            }

            .arrow {
                font-size: 0.8rem;
            }
        }

        /* Chatbot Styles */
        .chat-toggle-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: #003366;
            /* Deep blue */
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.3s ease;
        }

        .chat-toggle-button:hover {
            background-color: #1e4f91;
            /* Lighter blue */
            transform: scale(1.1);
        }

        .chat-toggle-button:active {
            background-color: #00214d;
            /* Darker blue */
            transform: scale(0.95);
        }

        .chat {
            display: none;
            flex-direction: column;
            position: fixed;
            bottom: 90px;
            right: 20px;
            width: 90%;
            max-width: 400px;
            max-height: 70vh;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            background-color: #ffffff;
            overflow: hidden;
            height: 422px;
        }

        .chat-header {
            padding: 15px;
            background-color: #003366;
            /* Deep blue */
            color: white;
            font-size: 1.2rem;
            font-weight: bold;
            text-align: center;
        }

        .chat-body {
            flex-grow: 1;
            padding: 10px 15px;
            overflow-y: auto;
            background-color: #d9e7f7;
            /* Light blue */
        }

        .chat-body::-webkit-scrollbar {
            width: 6px;
        }

        .chat-body::-webkit-scrollbar-thumb {
            background-color: #003366;
            border-radius: 3px;
        }

        .chat-body::-webkit-scrollbar-track {
            background-color: #d9e7f7;
        }

        .chat-message {
            margin: 10px 0;
            padding: 10px 12px;
            border-radius: 18px;
            width: fit-content;
            max-width: 75%;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .chat-message.user {
            background-color: #007bff;
            /* Bright blue */
            color: white;
            align-self: flex-end;
            border-radius: 18px 18px 0 18px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            margin-left: auto;
            /* Ensures the message is pushed to the right */
            text-align: right;
            /* Align text inside the bubble to the right */
        }


        .chat-message.bot {
            background-color: #ffffff;
            color: black;
            align-self: flex-start;
            border-radius: 18px 18px 18px 0;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .chat-footer {
            padding: 10px;
            background-color: #ffffff;
            display: flex;
            align-items: center;
            border-top: 1px solid #ddd;
        }

        .chat-footer input {
            flex-grow: 1;
            padding: 8px 12px;
            margin-right: 5px;
            border-radius: 23px;
            border: 1px solid #ddd;
            font-size: 0.9rem;
            transition: border-color 0.3s ease;
        }

        .chat-footer input:focus {
            border-color: #007bff;
            outline: none;
        }

        .chat-footer button {
            padding: 8px 10px;
            background-color: #003366;
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .chat-footer button:hover {
            background-color: #1e4f91;
        }

        .chat-footer button:active {
            background-color: #00214d;
        }

        /* Media Query for Smaller Screens */
        @media (max-width: 600px) {
            .chat {
                width: 95%;
                right: 2.5%;
                bottom: 80px;
                max-height: 60vh;
            }

            .chat-header {
                font-size: 1rem;
            }
        }
    </style>
</head>

<body>
    <div class="header">
        <div class="logo-container">
            <img src="logo.webp" alt="Logo" class="logo">
        </div>
        <div class="website-name">
            <h1>Sarveprajna</h1>
        </div>
    </div>
    <div class="info-box">
        <p>Welcome to Sarveprajna, where we provide curated educational videos for various subjects tailored to
            different learning styles. This website is to recommend personalized YouTube videos for a variety of
            subjects, catering to different learning styles. Whether you're a visual, auditory, or hands-on learner, the
            platform curates content to match your preferences and pace. By organizing videos based on complexity and
            delivery style, it ensures an effective and engaging learning experience for everyone, helping users grasp
            concepts more easily and enjoyably.</p>
    </div>
    <div class="box">
        <p1>At Sarveprajna, we recommend personalized YouTube videos across various subjects and courses, tailored to
            different learning styles. To learn more about the subjects and courses we offer <span
                class="arrow">âž”</span><a href="course.html" class="link"> click here</a></p1>
    </div>
    <!-- Chatbot -->
    <div class="chat-toggle-button" id="chat-toggle">ðŸ’¬</div>
    <div class="chat" id="chat-container">
        <div class="chat-header">Chatbot</div>
        <div class="chat-body" id="chat-body"></div>
        <div class="chat-footer">
            <input type="text" id="message-input" placeholder="Type a message...">
            <button id="send-button">âž¤</button>
        </div>
    </div>

</body>
<script type="importmap">
    {
      "imports": {
        "@google/generative-ai": "https://esm.run/@google/generative-ai"
      }
    }
</script>

<script type="module">
    import { GoogleGenerativeAI } from "@google/generative-ai"
    const toggleButton = document.getElementById('chat-toggle');
    const chatContainer = document.getElementById('chat-container');
    const chatBody = document.getElementById('chat-body');
    const messageInput = document.getElementById('message-input');
    const sendButton = document.getElementById('send-button');



    toggleButton.addEventListener('click', () => {
        chatContainer.style.display = chatContainer.style.display === 'flex' ? 'none' : 'flex';
    });

    const generateResponse = async (userMessage, messageElement) => {
        try {
            const answer = await runModel(userMessage, messageElement);

            messageElement.innerHTML = answer;
        } catch (error) {
            console.error("Failed to generate response:", error);
            messageElement.textContent = "Sorry, Something went wrong"
        }
    }
    messageInput.addEventListener('keydown', (event) => {
        if (event.key === 'Enter') {
            event.preventDefault(); // Prevent default form submission behavior
            sendButton.click(); // Trigger the send button click event
        }
    });



    sendButton.addEventListener('click', () => {
        const userMessage = messageInput.value.trim();
        if (userMessage) {
            const userBubble = document.createElement('div');
            userBubble.classList.add('chat-message', 'user');
            userBubble.textContent = userMessage;
            //console.log(userMessage)
            chatBody.appendChild(userBubble);
            messageInput.value = '';

            setTimeout(() => {
                const botBubble = document.createElement('div');
                botBubble.classList.add('chat-message', 'bot');
                generateResponse(userMessage, botBubble);
                chatBody.appendChild(botBubble);
            }, 1000);
        }
    });
    const genAI = new GoogleGenerativeAI("AIzaSyCw5dCwDeHriv26g2Jdju1zLstShfnWkkQ");
    const model = genAI.getGenerativeModel({ model: "gemini-1.5-flash" });
    async function runModel(prompt, messageElement) {
        const result = await model.generateContent(prompt);
        //console.log(result)
        let fullResponse = result.response.text()
        fullResponse = fullResponse.replace(/\*\*(.*?)\*\*/g, '<b>$1</b>');
        fullResponse = fullResponse.replace(/\n/g, '<br>');
        let halftext = ''
        for (let i = 0; i < fullResponse.length; i++) {
            halftext += fullResponse[i]  // Append letter by letter to the full response

            messageElement.innerHTML = halftext;

            // Add a small delay between each letter (e.g., 5ms)
            await new Promise(resolve => setTimeout(resolve, 5));
        }
        //console.log(fullResponse)
        return fullResponse
    }
</script>

</html>